{"version":3,"sources":["uni-app:///main.js","webpack:///F:/redShop/web/pages/index/index.vue?7ddc","webpack:///F:/redShop/web/pages/index/index.vue?2f00","webpack:///F:/redShop/web/pages/index/index.vue?2b03","webpack:///F:/redShop/web/pages/index/index.vue?2501","uni-app:///pages/index/index.vue","webpack:///F:/redShop/web/pages/index/index.vue?3195","webpack:///F:/redShop/web/pages/index/index.vue?fb92"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,6F,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACoN;AACpN,gBAAgB,4NAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA00B,CAAgB,01BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC6F91B;eACA;AACA,MADA,kBACA;AACA;AACA,iBADA;AAEA,6BAFA;AAGA,kCAHA;AAIA,kBAJA;AAKA,oBALA;AAMA,uBANA;AAOA,iBAPA;AAQA,sBARA;AASA,kBATA;AAUA,aAVA;AAWA,mBAXA;AAYA,qBAZA;AAaA,2BAbA;AAcA,kBAdA;AAeA,4CAfA;AAgBA,kBAhBA;AAiBA,uDAjBA;AAkBA,wBAlBA;;AAoBA,GAtBA;AAuBA,QAvBA,kBAuBA,MAvBA,EAuBA;AACA;AACA;AACA;AACA;AACA;AACA,GA7BA;AA8BA,QA9BA,oBA8BA;AACA;AACA,+BADA;AAEA,cAFA;AAGA,mBAHA;AAIA,QAJA,CAIA;;AAEA,KANA,EAMA,KANA,CAMA;AACA;AACA,KARA;;AAUA;AACA;AACA;AACA,sBADA;AAEA,oBAFA;;AAIA,KALA,MAKA;AACA;AACA,kCADA;AAEA;AACA,yBADA,EAFA;;AAKA,sBALA;AAMA,UANA,CAMA;AACA;AACA;AACA;AACA,OAVA,EAUA,KAVA,CAUA;AACA;AACA,OAZA;AAaA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,KANA;;AAQA,GA1EA;AA2EA,SA3EA,qBA2EA;AACA;AACA;;AAEA;AACA;AACA,iCADA;AAEA,UAFA,CAEA;AACA;AACA;AACA,OALA;AAMA;AACA,GAvFA;AAwFA;AACA,YADA,sBACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAXA;AAYA,kBAZA,4BAYA;AACA;AACA;AACA,kCADA;AAEA;AACA,yBADA,EAFA;;AAKA,sBALA;AAMA,UANA,CAMA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAVA;AAWA;AACA;AACA;AACA,OAvBA,EAuBA,KAvBA,CAuBA;AACA;AACA;AACA,sBADA;AAEA,sBAFA;;AAIA,OA7BA;AA8BA,KA5CA;AA6CA,YA7CA,sBA6CA;AACA;AACA,qBADA;AAEA,2BAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,aAFA;AAGA;AACA;AACA,WARA,MAQA;AACA;AACA;AACA,SAfA;;AAiBA,KA/DA;AAgEA,YAhEA,sBAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA,KAzEA;AA0EA,YA1EA,oBA0EA,GA1EA,EA0EA,IA1EA,EA0EA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA,yBADA;AAEA,wBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA;AACA;AACA,KAhGA;AAiGA,WAjGA,mBAiGA,GAjGA,EAiGA,KAjGA,EAiGA;AACA;AACA;AACA,KApGA;AAqGA,cArGA,wBAqGA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA;AAKA,KA5GA;AA6GA,UA7GA,oBA6GA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,iCADA;;AAGA;AACA,KAtHA;AAuHA,aAvHA,uBAuHA;AACA;AACA,qBADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oLADA;AAEA,wBAFA;AAGA,8BAHA;AAIA,kBAJA,CAIA;AACA;AACA,6CADA;AAEA,6CAFA;AAGA,yCAHA;AAIA,0CAJA,CAIA;AAJA;AAMA;AACA;AACA;AACA,eAdA,EAcA,KAdA,CAcA;AACA;AACA;AACA,eAjBA;AAkBA,aArBA;;AAuBA,SA7BA;AA8BA;AACA;AACA,SAhCA;;AAkCA,KA1JA;AA2JA,YA3JA,oBA2JA,KA3JA,EA2JA;AACA;AACA,6BADA;AAEA,mBAFA;AAGA,sBAHA;AAIA,UAJA,CAIA;AACA;AACA;AACA;AACA,OARA,EAQA,KARA,CAQA;AACA;AACA;AACA,sBADA;AAEA,sBAFA;;AAIA,OAdA;AAeA,KA3KA;AA4KA,YA5KA,sBA4KA;AACA;AACA;AACA,KA/KA,EAxFA,E;;;;;AA4QA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/WA;AAAA;AAAA;AAAA;AAAykD,CAAgB,6hDAAG,EAAC,C;;;;;;;;;;;ACA7lD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=57280228&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57280228\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=57280228&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n<page-meta>\r\n\t<navigation-bar\r\n\t  :title=\"nbTitle\"\r\n\t  :front-color=\"nbFrontColor\"\r\n\t  :background-color=\"nbBackgroundColor\"\r\n\t  :color-animation-duration=\"100\"\r\n\t  color-animation-timing-func=\"easeIn\"\r\n\t/>\r\n</page-meta>\r\n<view class=\"flex flex_dir_col\" style=\"height: 100%;\">\r\n\t<view class=\"contents bgfff flex1\">\r\n\t\t<view class=\"contBox flex\">\r\n\t\t\t<view class=\"cont_left flexauto\">\r\n\t\t\t\t<view class=\"item flex flexcenter flex_ac\" :class=\"actIndex==index?'on':''\" \r\n\t\t\t\tv-for=\"item,index in categoryList\" :key=\"index\" @click=\"cateFun(item,index)\">{{item}}</view>\r\n\t\t\t\t\r\n\t\t\t\t<view style=\"height: 80px;\"></view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"cont_right flex1\">\r\n\t\t\t\t<view class=\"list flex\" v-for=\"item,index in dataList\" :key=\"index\">\r\n\t\t\t\t\t<view class=\"flexauto proImg flex flexcenter\">\r\n\t\t\t\t\t\t<image :src=\"imgHost+item.product_img\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex1 proInfo flex flexbetween flex_dir_col\">\r\n\t\t\t\t\t\t<view class=\"proName\">{{item.product_name}}</view>\r\n\t\t\t\t\t\t<view class=\"proPirce flex flex_ac flexbetween\">\r\n\t\t\t\t\t\t\t<view class=\"price flex flex_ac\"><!-- <label>￥</label> -->\r\n\t\t\t\t\t\t\t<image src=\"../../static/red.png\" mode=\"widthFix\" style=\"width: 30rpx;margin-right: 5px;\"></image>\r\n\t\t\t\t\t\t\t{{item.price}}</view>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<view class=\"proAction flex flexbetween flexend\">\r\n\t\t\t\t\t\t\t\t<!-- <view class=\"btns\" v-if=\"item.num>0\" @click=\"proClick(item,1)\"><image src=\"../../static/pro_mini.png\" mode=\"aspectFill\"></image></view> -->\r\n\t\t\t\t\t\t\t\t<view class=\"num\" v-if=\"item.num>0\">{{item.num}} 包</view>\r\n\t\t\t\t\t\t\t\t<view v-else style=\"color:red\">库存不足</view>\r\n\t\t\t\t\t\t\t\t<!-- <view class=\"btns\" @click=\"proClick(item,2)\"><image src=\"../../static/pro_add.png\" mode=\"aspectFill\"></image></view> -->\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n\t\r\n\t\r\n\t<view class=\"bgBox fixed\" v-show=\"showDetail\" @click=\"showDFun()\"></view>\r\n\t<view class=\"bottomContBox bgfff fixed_bottom\" :class=\"showDetail?'show':''\">\r\n\t\t<view class=\"titles flex flexbetween\">\r\n\t\t\t<view class=\"nums\">已选商品 <label></label></view>\r\n\t\t\t<!-- <view class=\"clearBtn flex\" @click=\"clearFun\">\r\n\t\t\t\t<image src=\"../../static/clear.png\" mode=\"aspectFill\"></image>\r\n\t\t\t\t清空购物车\r\n\t\t\t</view> -->\r\n\t\t</view>\r\n\t\t<view class=\"conts\">\r\n\t\t\t<view class=\"items flex\" v-for=\"item,index in productList\" :key=\"index\" v-if=\"item.num>0\">\r\n\t\t\t\t<view class=\"name flex1\">{{item.product_name}}</view>\r\n\t\t\t\t<view class=\"price flex flex_ac\">\r\n\t\t\t\t\t<image src=\"../../static/red.png\" mode=\"widthFix\" style=\"width: 30rpx;margin-right: 5px;\"></image>\r\n\t\t\t\t{{item.price}}</view>\r\n\t\t\t\t<view class=\"proAction flex flexbetween flexend\">\r\n\t\t\t\t\t<!-- <view class=\"btns\" @click=\"proClick(item,1)\"><image src=\"../../static/pro_mini.png\" mode=\"aspectFill\"></image></view> -->\r\n\t\t\t\t\t<view class=\"num\">{{item.num}} 包</view>\r\n\t\t\t\t\t<!-- <view class=\"btns\" @click=\"proClick(item,2)\"><image src=\"../../static/pro_add.png\" mode=\"aspectFill\"></image></view> -->\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n\t\r\n\t\r\n\t<view class=\"footers fixed_bottom flex\" style=\"z-index: 999999;\">\r\n\t\t<view class=\"foot_left flex flex1\" @click=\"showDFun()\">\r\n\t\t\t<view class=\"carIcon flex flexcenter flex_ac\">\r\n\t\t\t\t<image src=\"../../static/car.png\" mode=\"aspectFill\"></image>\r\n\t\t\t\t<view class=\"allNums\" v-if=\"nums>0\">{{nums}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"allMoney\" v-if=\"totalMoney>0\"><!-- <label>￥</label> -->{{totalMoney/100}}</view>\r\n\t\t</view>\r\n\t\t<view class=\"goPay flexauto\" :class=\"totalMoney==0?'disabled':''\" @click=\"goNext()\">去结算</view><!-- disabled -->\r\n\t</view>\r\n\t\r\n\t<view class=\"divBg\" v-if=\"clickcount<6 && showSignAct\"></view>\r\n\t<view class=\"divCont\" v-if=\"clickcount<6 && showSignAct\">\r\n\t\t<view class=\"contBoxer\">\r\n\t\t\t<rich-text :nodes=\"signCont\"></rich-text>\r\n\t\t\t<button type=\"primary\" @click=\"IknowFun\">知道了</button>\r\n\t\t</view>\r\n\t</view>\r\n</view>\r\n</template>\r\n\r\n<script>\r\n\t// import md5 from 'js-md5';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tnbTitle: '',\r\n\t\t\t\tnbFrontColor: '#ffffff',\r\n\t\t\t\tnbBackgroundColor: '#393939',\r\n\t\t\t\tscrollTop:0,\r\n\t\t\t\tcontentsTop:0,\r\n\t\t\t\tshowDetail:false,\r\n\t\t\t\tactIndex:0,\r\n\t\t\t\tcategoryList:[],\r\n\t\t\t\tdataList:[],\r\n\t\t\t\tnums:0,\r\n\t\t\t\ttotalMoney:0,\r\n\t\t\t\tproductList:[],\r\n\t\t\t\timgHost:this.imgHost,\r\n\t\t\t\tshopInfo:{},\r\n\t\t\t\tvmid:uni.getStorageSync('vmid')||'',\r\n\t\t\t\tsignCont:'',\r\n\t\t\t\tclickcount:uni.getStorageSync('clickcount')||0,\r\n\t\t\t\tshowSignAct:false,\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\t// console.log(\"option===\",option)\r\n\t\t\tif(option.vmid){\r\n\t\t\t\tuni.setStorageSync('vmid',option.vmid)\r\n\t\t\t\tthis.vmid=option.vmid\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow(){\r\n\t\t\tthis.$request({\r\n\t\t\t\turl: '/redapi/checkToken',\r\n\t\t\t\tdata:{},\r\n\t\t\t\tmethod:'get',\r\n\t\t\t}).then(ress=>{\r\n\t\t\t\t\r\n\t\t\t}).catch(error=>{\r\n\t\t\t\t// console.log(error);\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tuni.hideLoading()\r\n\t\t\tif(this.vmid==''){\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请重新扫码',\r\n\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\tthis.$request({\r\n\t\t\t\t\turl: '/redapi/getShopInfo',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tvmid:this.vmid\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t}).then(ress=>{\r\n\t\t\t\t\tuni.setStorageSync('shopInfo', JSON.stringify(ress.data))\r\n\t\t\t\t\tthis.shopInfo=ress.data\r\n\t\t\t\t\tthis.nbTitle=ress.data.vmname+'---('+ (ress.data.netstatus==0?'离线':'在线')+')'\r\n\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\r\n\t\t\t/* if(uni.getStorageSync('shopInfo')){\r\n\t\t\t\tthis.nbTitle=JSON.parse(uni.getStorageSync('shopInfo')).vmname+'    ('+ (this.shopInfo.netstatus==0?'离线':'在线')+')'\r\n\t\t\t} */\r\n\t\t    uni.$on(\"handleFun\", res => {\r\n\t\t\t\tthis.nums=0;\r\n\t\t\t\tthis.totalMoney=0;\r\n\t\t        this.getProductList()\r\n\t\t        // 清除监听\r\n\t\t        uni.$off('handleFun');\r\n\t\t    })\r\n\t\t\t\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// console.log('index mounted')\r\n\t\t\tthis.getProductList()\r\n\t\t\t\r\n\t\t\tif(this.clickcount<=4){\r\n\t\t\t\tthis.$request({\r\n\t\t\t\t\turl: '/redapi/signActive'\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tthis.signCont= res.data\r\n\t\t\t\t\tthis.showSignAct=true\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tIknowFun(){\r\n\t\t\t\tif(this.clickcount<=4){\r\n\t\t\t\t\t++this.clickcount\r\n\t\t\t\t\tuni.setStorageSync('clickcount',this.clickcount)\r\n\t\t\t\t\tthis.showSignAct=false\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(this.clickcount==1){\r\n\t\t\t\t\t\tuni.removeStorageSync('userInfo')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetProductList(){\r\n\t\t\t\tuni.showLoading({mask:true})\r\n\t\t\t\tthis.$request({\r\n\t\t\t\t\turl: '/redapi/productList',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tvmid:this.vmid\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod:'POST'\r\n\t\t\t\t}).then(datas=>{\r\n\t\t\t\t\tthis.productList = datas.list\r\n\t\t\t\t\t// console.log('this.productList',this.productList)\r\n\t\t\t\t\tthis.productList.forEach(item=>{\r\n\t\t\t\t\t\tif(item.maxNum>0){\r\n\t\t\t\t\t\t\titem.num=1\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\titem.num=0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// console.log(item.category_name)\r\n\t\t\t\t\t\tif(!this.categoryList.includes(item.category_name)){\r\n\t\t\t\t\t\t\tthis.categoryList.push(item.category_name)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.totalFun()\r\n\t\t\t\t\tthis.filterData()\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: error,\r\n\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tclearFun(){\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t    title: '温馨提示',\r\n\t\t\t\t    content: '确定清空购物车？',\r\n\t\t\t\t    success: res=> {\r\n\t\t\t\t        if (res.confirm) {\r\n\t\t\t\t            this.nums=0;\r\n\t\t\t\t            this.totalMoney=0;\r\n\t\t\t\t            this.productList.forEach(item=>{\r\n\t\t\t\t            \titem.num=0\r\n\t\t\t\t            })\r\n\t\t\t\t            this.showDetail=false\r\n\t\t\t\t            this.$forceUpdate()\r\n\t\t\t\t        } else if (res.cancel) {\r\n\t\t\t\t            console.log('用户点击取消');\r\n\t\t\t\t        }\r\n\t\t\t\t    }\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\ttotalFun(){\r\n\t\t\t\tthis.nums=0;\r\n\t\t\t\tthis.totalMoney=0;\r\n\t\t\t\tthis.productList.forEach(item=>{\r\n\t\t\t\t\tif(item.num>0){\r\n\t\t\t\t\t\tthis.nums += item.num\r\n\t\t\t\t\t\tthis.totalMoney += item.num*(100*item.price)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tproClick(obj,type){\r\n\t\t\t\tif(type==1){\r\n\t\t\t\t\tobj.num -=1\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(obj.num<obj.maxNum){\r\n\t\t\t\t\t\tobj.num +=1\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '库存不足',\r\n\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.productList.forEach(item=>{\r\n\t\t\t\t\tif (item.product_id==obj.product_id ){\r\n\t\t\t\t\t\titem.num=obj.num\r\n\t\t\t\t\t\t// console.log(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.totalFun()\r\n\t\t\t\tthis.$forceUpdate()\r\n\t\t\t},\r\n\t\t\tcateFun(obj,index){\r\n\t\t\t\tthis.actIndex=index\r\n\t\t\t\tthis.filterData()\r\n\t\t\t},\r\n\t\t\tfilterData(){\r\n\t\t\t\tthis.dataList=[]\r\n\t\t\t\tthis.productList.forEach(item=>{\r\n\t\t\t\t\tif (item.category_name==this.categoryList[this.actIndex]){\r\n\t\t\t\t\t\tthis.dataList.push(item)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgoNext(){\r\n\t\t\t\tif(!uni.getStorageSync('token')){\r\n\t\t\t\t\tthis.registFun()\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(this.totalMoney==0) return\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl:'/pages/index/pay'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tregistFun(){\r\n\t\t\t\tuni.getUserProfile({\r\n\t\t\t\t\tdesc:'Wexin',\r\n\t\t\t\t\tsuccess:res=>{\r\n\t\t\t\t\t\t// uni.setStorageSync('userInfo', res.rawData)\r\n\t\t\t\t\t\tlet userInfo =  JSON.parse(res.rawData)\r\n\t\t\t\t\t\tuni.showLoading({mask:true})\r\n\t\t\t\t\t\twx.login({\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\tlet code = res.code;\r\n\t\t\t\t\t\t\t\tthis.$request({\r\n\t\t\t\t\t\t\t\t\turl: `/redapi/wxgetOpenId?js_code=${code}&headimg=${userInfo.avatarUrl}&nickname=${userInfo.nickName}&gender=${userInfo.gender}`,\r\n\t\t\t\t\t\t\t\t\tdata:{},\r\n\t\t\t\t\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\t\t\t\t}).then(ress=>{\r\n\t\t\t\t\t\t\t\t\tlet datas={\r\n\t\t\t\t\t\t\t\t\t\theadimg:userInfo.avatarUrl,\r\n\t\t\t\t\t\t\t\t\t\tnickname:userInfo.nickName,\r\n\t\t\t\t\t\t\t\t\t\tgender:userInfo.gender,\r\n\t\t\t\t\t\t\t\t\t\topenid:ress.data.openid, // oa5QL5jdQ-j227aAjbKrQd2PIj-s\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tuserInfo.isOld = ress.data.isOld\r\n\t\t\t\t\t\t\t\t\tuni.setStorageSync('userInfo', JSON.stringify(userInfo))\r\n\t\t\t\t\t\t\t\t\tthis.loginFun(datas)\r\n\t\t\t\t\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail:err=>{\r\n\t\t\t\t\t   console.log(err)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tloginFun(datas){\r\n\t\t\t\tthis.$request({\r\n\t\t\t\t\turl: '/redapi/regist',\r\n\t\t\t\t\tdata:datas,\r\n\t\t\t\t\tmethod:'POST'\r\n\t\t\t\t}).then(ress=>{\r\n\t\t\t\t\tuni.setStorageSync('token', ress.token)\r\n\t\t\t\t\tthis.goNext()\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t}).catch(error=>{\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: error,\r\n\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tshowDFun(){\r\n\t\t\t\tif(this.totalMoney==0) return\r\n\t\t\t\tthis.showDetail = !this.showDetail\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t// uni.createSelectorQuery().select(\".sticke\").boundingClientRect((res)=>{\r\n\t//     uni.pageScrollTo({\r\n\t//         duration:0,\r\n\t//         scrollTop:800\r\n\t//     })\r\n\t// }).exec()\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t.divBg{position: fixed;width: 100%;height: 100%;left:0;top:0;z-index: 99999999;background-color: rgba(0,0,0,.6);}\r\n\t.divCont{position: fixed;width: 80vw;left:10vw;top:10vh;z-index: 999999999;\r\n\tbackground-color:#fff;padding:15px;border-radius:5px;\r\n\t\t.contBoxer{max-height: 110vw;overflow-y: auto;}\r\n\t\tbutton{margin-top: 20px;display: block;}\r\n\t}\r\n\t\r\n\t\r\n\t.indexTop{background-color: #393939;color: #fff;}\r\n\t.adressName{width: 50%;height: 35px;line-height: 35px;text-align: center;margin: 0 auto;font-size: 16px;}\r\n\t.shopInfo{padding:15px 10px 20px;\r\n\t\t.shopImg{width: 140rpx;height: 140rpx;margin-right: 15px;\r\n\t\t\timage{width: 140rpx;height: 140rpx;}\r\n\t\t}\r\n\t\t.infos{overflow: hidden;padding-right: 10px;}\r\n\t\t.name{font-size: 16px;padding:5px 0;}\r\n\t\t.gonggao{font-size: 12px;width: 100%;\r\n\t\t\t.label{width: 38px;}\r\n\t\t\t.gonggaoInfo{width: 150%;white-space: nowrap;}\r\n\t\t}\r\n\t}\r\n\t\r\n\t.navBox{height: 40px;\r\n\t\t.item{width: 100px;text-align: center;height: 40px;line-height: 40px;}\r\n\t\t.on{color: #f1af13;border-bottom: 3px solid #f1af13;height: 37px;line-height: 37px;;}\r\n\t}\r\n\t\r\n\t.contents,.contBox{height: 100vh;overflow: hidden;}\r\n\t.contentFixed{position: fixed;left:0; top: 0;width: 100%;z-index: 999;}\r\n\t\r\n\t.cont_left{background-color: #fafafa;height: 100%;width: 80px;overflow-y: auto;\r\n\t\t.item{height: 80px;}\r\n\t\t.item.on{color: #f1af13;background-color: #fff;font-weight: bold;}\r\n\t}\r\n\t.cont_right{padding: 10px;height: 100%;overflow-y: auto;\r\n\t\t.list{border-radius: 5px;box-shadow:0px 0px 5px 0 #ddd;padding:10px;margin-bottom: 10px;\r\n\t\t\t.proImg{width: 80px;height: 100px;overflow: hidden;margin-right: 10px;border-radius: 5px;\r\n\t\t\t\timage{width: 100%;height:100%}\r\n\t\t\t}\r\n\t\t\t.proInfo{\r\n\t\t\t\t.proName{color: #333;font-size: 15px;font-weight: bold;}\r\n\t\t\t\t.proPirce{\r\n\t\t\t\t\t.price{color: #a1081c;font-size: 18px;\r\n\t\t\t\t\t\tlabel{font-size: 14px;}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\r\n\t\t}\r\n\t}\r\n\t// \r\n\t.proAction{//width: 80px;\r\n\t\t.btns{width: 25px;height: 25px;\r\n\t\t\timage{width: 25px;height: 25px;}\r\n\t\t}\r\n\t\t.num{height: 25px;line-height: 25px;font-size: 16px;width: 50px;text-align: right;}\r\n\t}\r\n\t\r\n\t.footers{background-color: #525050;height: 50px;color: #fff;\r\n\t\t.foot_left{\r\n\t\t\t.carIcon{width: 60px;position: relative;\r\n\t\t\t\timage{width: 25px;height: 25px;}\r\n\t\t\t\t.allNums{position: absolute;width: 15px;height: 15px;line-height: 15px;border-radius: 50%;z-index: 1;background-color: #E24B3E;text-align: center;\r\n\t\t\t\t\ttop: 5px;right: 5px;font-size: 12px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.allMoney{padding-left: 10px; line-height: 50px;font-size: 18px;\r\n\t\t\t\tlabel{font-size: 14px;}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.goPay{background-color: #FFAA16;font-size: 16px;font-weight: bold;line-height: 50px;padding:0 20px;}\r\n\t\t.goPay.disabled{background-color: #8d8f8e;}\r\n\t}\r\n\t\r\n\t\r\n\t.bgBox{height: 100vh;background: rgba(0,0,0,0.6);z-index: 9;}\r\n\t.bottomContBox{bottom: -100vh;z-index: 10;\r\n\t\t.titles{background: #F4F4F4;padding: 10px;color: #aaa;\r\n\t\t\t.nums{color: #616161;\r\n\t\t\t\tlabel{font-size: 12px;margin-left: 5px;}\r\n\t\t\t}\r\n\t\t\t.clearBtn{\r\n\t\t\t\timage{width: 18px;margin-right: 5px;}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.conts{max-height: 260px;overflow-y: auto;}\r\n\t\t.items{padding: 15px 10px;border-bottom: 1px solid #eee;\r\n\t\t\t.price{width: 80px;font-weight: bold;font-size: 15px;}\r\n\t\t}\r\n\t}\r\n\t.bottomContBox.show{bottom: 50px;transition: bottom ease .3s;}\r\n\t\r\n\t\r\n\t\r\n\t\r\n</style>\r\n","import mod from \"-!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=57280228&scoped=true&lang=scss&\"; export default mod; export * from \"-!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX.2.7.14.20200618.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=57280228&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1654690708599\n      var cssReload = require(\"D:/Program Files/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}